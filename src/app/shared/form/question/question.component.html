<div [formGroup]="form">
  <div [ngSwitch]="question.controltype">
    
    <mat-form-field *ngSwitchCase="'input'">
        <input matInput [formControlName]="key"
        [id]="key" [type]="question.type" [value]="question.value" [placeholder]="question.label">
    </mat-form-field>

    <mat-form-field *ngSwitchCase="'textarea'">
      <textarea matInput [formControlName]="key"
      [id]="key" [type]="question.type" [value]="question.value" [placeholder]="question.label"></textarea>
  </mat-form-field>

    <div class="image-upload" *ngSwitchCase="'image'">
    <input [id]="key" [formControlName]="key"  [type]="question.type" (change)="readURL($event);" />
    <img id="blah" [src]="imageSrc || 'http://placehold.it/180'" width="100%" alt="your image" />
    </div>
    <mat-form-field *ngSwitchCase="'disabled'">
        <input matInput [formControlName]="key"
        [id]="key" [type]="question.type" [value]="question.value" [placeholder]="question.label">
    </mat-form-field>
    <div *ngSwitchCase="'hidden'">
        <input [formControlName]="key"
        [id]="key" [type]="question.type" [value]="question.value">
    </div>
    
    <mat-form-field  *ngSwitchCase="'dropdown'" [id]="key"  >
      <mat-select [formControlName]="key" [placeholder]="question.label">
          <mat-option *ngFor="let opt of question.options" [disabled]="opt.optdisabled"  [value]="opt.key">{{opt.value}}</mat-option>
      </mat-select>
    </mat-form-field>
    <div *ngSwitchCase="'arrayautocomplete'">
        <mat-list [formArrayName] = "key">
            <mat-list-item>

                <mat-form-field>
                    <input [disabled]="isArrayDisabled(key)" type="text" #autocomplete matInput [matAutocomplete]="auto">
                  </mat-form-field>
                  <mat-autocomplete #auto="matAutocomplete" [displayWith]="displayFn">
                    <mat-option *ngFor="let option of question.options"  [value]="option">{{option.name}}</mat-option>
                  </mat-autocomplete>
                <button (click)="addItem(key, autocomplete)">Add</button>
            </mat-list-item>
            <mat-list-item *ngFor="let item of getArrayValue(key); let i = index">
              {{item}}
              <!-- <span *ngFor="let form of Object.keys(item)">
                {{item[form]}}
              </span> -->
              
              <button mat-button (click)="deleteArrayItem(i, key)">Delete</button>
            </mat-list-item>
          </mat-list>
                
    </div>
    <div *ngSwitchCase="'arrayinput'">
        <mat-list [formArrayName] = "key">
            <mat-list-item>
                <mat-form-field>
                    <input [disabled]="this.form.get(key)?.disabled" type="text" #arrayinputfield matInput>
                  </mat-form-field>
                <button [disabled]="this.form.get(key)?.disabled" (click)="addItem(key, arrayinputfield)">Add</button>
            </mat-list-item>
            <mat-list-item *ngFor="let item of getArrayValue(key); let i = index">
              {{item}}
              <button mat-button (click)="deleteArrayItem(i, key)">Delete</button>
            </mat-list-item>
          </mat-list> 
    </div>
    <div *ngSwitchCase="'arraymodal'">
        <mat-list [formArrayName] = "key">
          <mat-list-item>
            <!-- {{question.value |json}} -->
            <button mat-button (click)="openDialog(question)">Agregar item</button>
          </mat-list-item>
          <mat-list-item *ngFor="let item of getArrayValue(key); let i = index">
                <div  *ngFor="let li of item |keys">
                    {{li}} : {{item[li]}}
                </div>
            <button mat-button (click)="deleteArrayItem(i, key)">Delete</button>
          </mat-list-item>
        </mat-list>
    </div>
    <div *ngSwitchCase="'arrayGrid'">
      <mat-grid-list>
        <mat-grid-tile *ngFor="let item of question.value"></mat-grid-tile>
      </mat-grid-list>
  </div>
 
  </div> 
</div>